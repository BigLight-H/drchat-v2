{"version":3,"file":"js/218.fb51e1a7.js","mappings":"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","sources":["webpack://drchat/./node_modules/sdp/sdp.js","webpack://drchat/./src/views/Message/VideoChat.vue?09c1","webpack://drchat/./src/views/Message/Video/Cameras.vue?8524","webpack://drchat/./src/views/Message/Video/Cameras.vue","webpack://drchat/./node_modules/webrtc-adapter/src/js/utils.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/common_shim.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack://drchat/./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack://drchat/./src/controller/VideoChatController.ts","webpack://drchat/./src/views/Message/VideoChat.vue?4ff4","webpack://drchat/./src/views/Message/VideoChat.vue"],"sourcesContent":["/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substr(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substr(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5ab169b9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"video-box\" }\nconst _hoisted_2 = { class: \"friend-box\" }\nconst _hoisted_3 = { class: \"avatar\" }\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = { class: \"info\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"friend-name\" }, \"test\", -1))\nconst _hoisted_7 = {\n  key: 0,\n  class: \"connect-message\"\n}\nconst _hoisted_8 = {\n  key: 1,\n  class: \"connect-message\"\n}\nconst _hoisted_9 = {\n  key: 2,\n  class: \"connect-message\"\n}\nconst _hoisted_10 = {\n  key: 0,\n  class: \"connect-message\"\n}\nconst _hoisted_11 = {\n  key: 1,\n  class: \"connect-message\"\n}\nconst _hoisted_12 = { class: \"chat-tool\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-switch-camera\" }, null, -1))\nconst _hoisted_14 = [\n  _hoisted_13\n]\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-guaduan1\" }, null, -1))\nconst _hoisted_16 = [\n  _hoisted_15\n]\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-jingyin\" }, null, -1))\nconst _hoisted_18 = [\n  _hoisted_17\n]\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-sound-off\" }, null, -1))\nconst _hoisted_20 = [\n  _hoisted_19\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Cameras = _resolveComponent(\"Cameras\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"img\", {\n          src: _ctx.friend?.friend.avatar\n        }, null, 8, _hoisted_4)\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _hoisted_6,\n        (_ctx.$route.query.accept == 1)\n          ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n              (_ctx.isPeerConnection)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \"正在接入连线...\"))\n                : (_ctx.facehim.booted)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \"正在通话...\"))\n                  : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, \"等待视频连接...\"))\n            ], 64))\n          : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n              (!_ctx.inviteAsk.result)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, \"等待对方接受邀请...\"))\n                : (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString(_ctx.inviteAsk.resultMap[_ctx.inviteAsk.result]), 1))\n            ], 64))\n      ])\n    ]),\n    _createElementVNode(\"video\", {\n      class: _normalizeClass([\"faceme\", _ctx.facemeClasses]),\n      ref: \"facemeRef\",\n      onMousedown: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.handleMouse && _ctx.handleMouse(...args))),\n      onTouchmove: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.handleTouch && _ctx.handleTouch(...args))),\n      onTouchstart: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.handleTouch && _ctx.handleTouch(...args))),\n      onTouchend: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.handleTouch && _ctx.handleTouch(...args))),\n      onDblclick: _cache[4] || (_cache[4] = _withModifiers(($event: any) => (_ctx.handleFullscreen('faceme')), [\"exact\"])),\n      muted: \"\",\n      autoplay: \"\"\n    }, null, 34),\n    _createElementVNode(\"video\", {\n      class: _normalizeClass([\"facehim\", _ctx.facehimClasses]),\n      ref: \"facehimRef\",\n      onMousedown: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.handleMouse && _ctx.handleMouse(...args))),\n      onTouchmove: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.handleTouch && _ctx.handleTouch(...args))),\n      onTouchstart: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.handleTouch && _ctx.handleTouch(...args))),\n      onTouchend: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.handleTouch && _ctx.handleTouch(...args))),\n      onDblclick: _cache[9] || (_cache[9] = ($event: any) => (_ctx.handleFullscreen('facehim'))),\n      autoplay: \"\"\n    }, null, 34),\n    _createElementVNode(\"div\", _hoisted_12, [\n      _createElementVNode(\"div\", {\n        class: _normalizeClass({item:true, active: _ctx.faceme.camera_off})\n      }, [\n        _createElementVNode(\"i\", {\n          class: \"iconfont icon-qiehuanyuyin\",\n          onClick: _cache[10] || (_cache[10] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.handleToggleCamera && _ctx.handleToggleCamera(...args)), [\"stop\"]))\n        })\n      ], 2),\n      _createElementVNode(\"div\", {\n        class: \"item\",\n        onClick: _cache[11] || (_cache[11] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.handleToggleSwitchCamera && _ctx.handleToggleSwitchCamera(...args)), [\"stop\"]))\n      }, _hoisted_14),\n      _createElementVNode(\"div\", {\n        class: \"item hand-up\",\n        onClick: _cache[12] || (_cache[12] = _withModifiers(($event: any) => (_ctx.$router.go(-1)), [\"stop\"]))\n      }, _hoisted_16),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass({item: true, active: _ctx.faceme.muted}),\n        onClick: _cache[13] || (_cache[13] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.handleToggleMuted && _ctx.handleToggleMuted(...args)), [\"stop\"]))\n      }, _hoisted_18, 2),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass({item: true, active: _ctx.faceme.sound_off}),\n        onClick: _cache[14] || (_cache[14] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.handleToggleSound && _ctx.handleToggleSound(...args)), [\"stop\"]))\n      }, _hoisted_20, 2)\n    ]),\n    _createVNode(_component_Cameras, {\n      modelValue: _ctx.cameraPick,\n      \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => ((_ctx.cameraPick) = $event)),\n      cameras: _ctx.devices.camera.all,\n      onPickCamera: _ctx.handlePickCamera\n    }, null, 8, [\"modelValue\", \"cameras\", \"onPickCamera\"])\n  ]))\n}","import { defineComponent as _defineComponent } from 'vue'\nimport {onMounted, watch} from \"vue\";\n\n    \nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Cameras',\n  props: {\n        modelValue: Boolean,\n        cameras: Array,\n    },\n  emits: ['update:modelValue', 'pickCamera'],\n  setup(__props, { emit: emits }) {\n\nconst props = __props;\n\n    \n    \n    const handleClose = () => {\n        emits('update:modelValue', false);\n    };\n\n    const handlePickCamera = (index: number, camera: any) => {\n        emits('pickCamera', index, camera);\n    };\n\nreturn () => {}\n}\n\n})","import script from \"./Cameras.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./Cameras.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        // WebIDL input coercion and validation\n        let sendEncodings = arguments[1] && arguments[1].sendEncodings;\n        if (sendEncodings === undefined) {\n          sendEncodings = [];\n        }\n        sendEncodings = [...sendEncodings];\n        const shouldPerformCheck = sendEncodings.length > 0;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = sendEncodings;\n            sender.sendEncodings = sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimRTCIceCandidateRelayProtocol(window) {\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'relayProtocol' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      const parsedCandidate = SDPUtils.parseCandidate(e.candidate.candidate);\n      if (parsedCandidate.type === 'relay') {\n        // This is a libwebrtc-specific mapping of local type preference\n        // to relayProtocol.\n        e.candidate.relayProtocol = {\n          0: 'tls',\n          1: 'tcp',\n          2: 'udp',\n        }[parsedCandidate.priority >> 24];\n      }\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nexport function shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\nimport * as sdp from 'sdp';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimGetStats(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","import Controller from \"@/interface/Controller\";\nimport Cameras from \"@/views/Message/Video/Cameras.vue\";\nimport {computed, onMounted, reactive, Ref, ref, unref, watch} from \"vue\";\nimport 'webrtc-adapter';\nimport {UnwrapNestedRefs} from \"@vue/reactivity\";\nimport Config from \"@/lib/Config\";\nimport {Socketio, useSocketio} from \"@/lib/Socket/Socketio\";\nimport {message, Modal} from \"ant-design-vue\";\nimport Friend from \"@/api/Friend\";\nimport {\n    NavigationGuardNext,\n    onBeforeRouteLeave,\n    RouteLocationNormalized,\n    RouteLocationNormalizedLoaded,\n    Router,\n    useRoute,\n    useRouter\n} from \"vue-router\";\nimport {Store, useStore} from \"vuex\";\n\ninterface CameraInfo {\n    readonly deviceId: string;\n    readonly groupId: string;\n    readonly kind: MediaDeviceKind;\n    readonly label: string;\n    readonly type: \"front\" | \"back\";\n}\n\ninterface FaceMe {\n    video: boolean | MediaTrackConstraints,\n    audio: boolean | MediaTrackConstraints,\n    booted: boolean,\n    muted: boolean,\n    sound_off: boolean,\n    camera_off: boolean,\n    camera: CameraInfo,\n    stream?: MediaStream,\n    fullscreen: boolean\n}\n\ninterface FaceHim {\n    booted: boolean,\n    camera_type: 'front' | 'back',\n    fullscreen: boolean,\n}\n\ninterface Devices {\n    camera: {\n        front: CameraInfo[],\n        back: CameraInfo[],\n        all: CameraInfo[],\n    },\n    all: MediaDeviceInfo[],\n}\n\nexport default class VideoChatController implements Controller {\n    protected components = {Cameras,};\n    protected devices!: Devices;\n    protected faceme!: UnwrapNestedRefs<FaceMe>;\n    protected facehim!: UnwrapNestedRefs<FaceHim>;\n    protected cameraDrag!: UnwrapNestedRefs<any>;\n    protected peerConnection!: UnwrapNestedRefs<RTCPeerConnection>;\n    protected facemeRef: Ref = ref();\n    protected facehimRef: Ref = ref();\n    protected socketio!: Socketio;\n    protected friend: Ref = ref();\n    protected route!: RouteLocationNormalizedLoaded;\n    protected router!: Router;\n    protected store!: Store<any>;\n    protected facingMode = {front: 'user', back: 'environment'};\n    protected inviteAsk!: UnwrapNestedRefs<any>;\n    protected cameraPick!: Ref<boolean>;\n\n    setup(props: any, context: any): any {\n        this.socketio = useSocketio();\n        this.route = useRoute();\n        this.router = useRouter();\n        this.store = useStore();\n        this.cameraPick = ref(false);\n\n        this.devices = reactive({\n            camera: {\n                front: [],\n                back: [],\n                all: []\n            },\n            all: [],\n        });\n        this.facehim = reactive({\n            booted: false,\n            camera_type: 'front',\n            fullscreen: false,\n        });\n        this.faceme = reactive({\n            video: true,\n            audio: true,\n            muted: false,\n            booted: false,\n            fullscreen: true,\n            sound_off: false,\n            camera_off: false,\n            camera: <any>{},\n        });\n        this.cameraDrag = reactive({\n            start: false,\n            xDiffer: 0,\n            yDiffer: 0,\n        });\n        this.inviteAsk = reactive({\n            result: '',\n            resultMap: {\n                'accept': '等待连线...',\n                'connected': '正在与好友建立视频连线...',\n                'no-media': '好友设备不支持视频聊天',\n                'reject': '好友拒绝了你的视频聊天请求',\n            }\n        });\n\n        onMounted(async () => {\n            // 初始化事件\n            this.initSocketEvents();\n            this.initDevices()\n                .then(devices => this.bootCamera('front'))\n                .then(stream => {\n                    if (<any>this.route.query.accept != 1) {\n                        console.log('opened');\n                        this.publish({\n                            friend_id: this.friend.value.friend_id,\n                            event: 'call-up',\n                            data: {\n                                sender: this.store.state.User.info.id,\n                                type: 'video'\n                            },\n                        });\n                    } else if (<any>this.route.query.accept == 1 && !this.peerConnection) {\n                        console.log('connected by invite');\n                        this.publish({\n                            friend_id: this.friend.value.friend_id,\n                            event: 'call-invite-feedback',\n                            data: {\n                                sender: this.store.state.User.info.id,\n                                result: 'connected'\n                            },\n                        });\n                    }\n                });\n        });\n        // 卸载所有事件\n        onBeforeRouteLeave((to, from, next) => {\n            this.handUp(false);\n            this.socketio.off('video-event');\n            next();\n        });\n        return {\n            faceme: this.faceme,\n            facehim: this.facehim,\n            facemeRef: this.facemeRef,\n            facehimRef: this.facehimRef,\n            friend: this.friend,\n            inviteAsk: this.inviteAsk,\n            devices: this.devices,\n            cameras: this.devices.camera.all,\n            cameraPick: this.cameraPick,\n            isPeerConnection: computed(() => !!this.peerConnection),\n            facemeClasses: computed(() => ({\n                //'front': this.faceme.camera.type == 'front',\n                'hide': !this.faceme.booted,\n                'full-screen': this.faceme.fullscreen,\n                'float-screen': !this.faceme.fullscreen,\n                'trans-none': this.cameraDrag.start,\n            })),\n            facehimClasses: computed(() => ({\n                //'front': this.facehim.camera_type == 'front',\n                'hide': !this.facehim.booted,\n                'full-screen': !this.faceme.fullscreen,\n                'float-screen': this.faceme.fullscreen,\n                'trans-none': this.cameraDrag.start,\n            })),\n\n            handleFullscreen: this.handleFullscreen.bind(this),\n            handleMouse: this.handleMouse.bind(this),\n            handleTouch: this.handleTouch.bind(this),\n            handleToggleCamera: this.handleToggleCamera.bind(this),\n            handleToggleMuted: this.handleToggleMuted.bind(this),\n            handleToggleSound: this.handleToggleSound.bind(this),\n            handleToggleSwitchCamera: this.handleToggleSwitchCamera.bind(this),\n            handlePickCamera: this.handlePickCamera.bind(this),\n        };\n    }\n\n    public beforeRouteEnter(to: RouteLocationNormalized, from: RouteLocationNormalized, next: NavigationGuardNext) {\n        let friend_id = <any>to.query.friend_id;\n        if (!friend_id) {\n            message.error('参数错误');\n            this.router.go(-1);\n            return false;\n        }\n        Friend.loading(true).info(friend_id).then(res => {\n            this.friend.value = reactive(res.data);\n            next();\n        }, e => {\n            message.error(e.message);\n            this.router.go(-1);\n        });\n    }\n\n    /**\n     * 数据交换\n     */\n    protected initSocketEvents() {\n        this.socketio.on('video-event', (response: any) => {\n            switch (response.event) {\n                case 'client-answer':\n                    console.log('client-answer', response);\n                    if (this.peerConnection) {\n                        this.peerConnection.setRemoteDescription(new RTCSessionDescription(response.data));\n                    }\n                    break;\n                case 'client-candidate':\n                    console.log('client-candidate', response);\n                    if (response.data && this.peerConnection) {\n                        this.peerConnection.addIceCandidate(new RTCIceCandidate(response.data));\n                    }\n                    break;\n                case 'client-offer':\n                    console.log('client-offer');\n                    if (!this.peerConnection) {\n                        this.createPeerConnection();\n                        this.addTracks();\n                    }\n                    // 触发本地端的ontrack事件\n                    // 同时触发远程端的onicecandidate事件\n                    this.peerConnection.setRemoteDescription(new RTCSessionDescription(response.data))\n                        .then(() => this.peerConnection.createAnswer())\n                        .then(description => this.peerConnection.setLocalDescription(description))\n                        .then(() => {\n                            this.publish({\n                                event: 'client-answer',\n                                friend_id: this.friend.value.friend_id,\n                                data: this.peerConnection.localDescription\n                            });\n                        });\n                    break;\n                case 'call-invite-feedback':\n                    console.log('call-invite-feedback');\n                    this.inviteAsk.result = response.data.result;\n                    if (response.data.result == 'reject') {\n                        Modal.error({title: '好友拒绝了你的视频聊天请求'});\n                        this.router.go(-1);\n                    } else if (response.data.result == 'accept') {\n                        message.success('好友同意了聊天请求');\n                    } else if (response.data.result == 'no-media') {\n                        Modal.error({title: '好友设备不支持视频聊天'});\n                        this.router.go(-1);\n                    } else if (response.data.result == 'outline') {\n                        Modal.error({\n                            title: '好友不在线',\n                            okText: '退出',\n                            onOk: () => this.router.go(-1),\n                        });\n                    } else if (response.data.result == 'hand-up') {\n                        Modal.info({\n                            title: '对方已挂断',\n                            okText: '退出',\n                            onOk: () => this.router.go(-1),\n                        });\n                    } else if (response.data.result == 'connected') {\n                        message.success('正在与好友建立视频连线');\n                        this.createPeerConnection();\n                        // 添加本地track 发送localDescription时会被带过去\n                        if (this.faceme.stream) {\n                            this.faceme.stream.getTracks().forEach(track => {\n                                console.log('addtrack');\n                                this.peerConnection.addTrack(track, <MediaStream>this.faceme.stream);\n                            });\n                        } else {\n                            message.success('连线失败');\n                        }\n                    }\n                    break;\n                case 'call-up':\n                    if (this.route.query.accept) {\n                        let next: Promise<any> = Promise.resolve();\n                        if (!this.peerConnection.localDescription) {\n                            next = this.createOffer();\n                        }\n                        next.then(() => {\n                            this.publish({\n                                friend_id: this.friend.value.friend_id,\n                                event: 'client-offer',\n                                data: this.peerConnection.localDescription,\n                            });\n                        });\n                    }\n                    break;\n            }\n        });\n    }\n\n    /**\n     * 初始化媒体设备\n     */\n    protected initDevices() {\n        return navigator.mediaDevices.enumerateDevices().then((devices: MediaDeviceInfo[]) => {\n            this.devices.camera.front = [];\n            this.devices.camera.back = [];\n            this.devices.camera.all = [];\n            this.devices.all = [...devices];\n            devices.forEach(device => {\n                if (device.kind.search(/video/i) < 0) {\n                    return;\n                }\n                let group = device.label.match(/camera\\d*\\s+(\\d+)/i);\n                let back_id: number = (group ? group[1] : this.devices.camera.back.length) as number;\n                let front_id: number = (group ? group[1] : this.devices.camera.front.length) as number;\n                let camera: CameraInfo = {\n                    deviceId: device.deviceId,\n                    groupId: device.groupId,\n                    kind: device.kind,\n                    label: device.label,\n                    type: \"front\",\n                };\n                if (device.label.search(/fac[ing]*\\s+back/i) >= 0) {\n                    this.devices.camera.back[back_id] = {...camera, type: \"back\"};\n                } else if (device.label.search(/fac[ing]*\\s+front/i) >= 0) {\n                    this.devices.camera.front[front_id] = {...camera, type: \"front\"};\n                }\n                this.devices.camera.all.push(camera);\n            });\n            this.devices.camera.front = Object.values(this.devices.camera.front);\n            this.devices.camera.back = Object.values(this.devices.camera.back);\n            return Promise.resolve(this.devices);\n        });\n    }\n\n    // 全屏\n    protected handleFullscreen(type = 'faceme') {\n        // @ts-ignore\n        this[`${type}Ref`].value.style = {};\n        this.faceme.fullscreen = type == 'faceme';\n    }\n\n    // 鼠标\n    protected handleMouse(e: any) {\n        if (e.type == 'mousedown') {\n            if (!e.target.classList.contains('float-screen')) return;\n            this.cameraDrag.start = true;\n            this.cameraDrag.xDiffer = e.clientX - e.target.offsetLeft;\n            this.cameraDrag.yDiffer = e.clientY - e.target.offsetTop;\n            this.cameraDrag.element = e.target;\n            document.onmouseup = () => {\n                this.cameraDrag.start = false;\n                this.cameraDrag.xDiffer = 0;\n                this.cameraDrag.yDiffer = 0;\n                document.onmouseup = null;\n                document.onmousemove = null;\n            };\n            document.onmousemove = (e) => {\n                if (!this.cameraDrag.start) return;\n                e.preventDefault();\n                var x = e.clientX - this.cameraDrag.xDiffer;\n                var y = e.clientY - this.cameraDrag.yDiffer;\n                this.cameraDrag.element.style.right = 0;\n                this.cameraDrag.element.style.left = x + 'px';\n                this.cameraDrag.element.style.top = y + 'px';\n            };\n        }\n    }\n\n    // 触摸\n    protected handleTouch(e: any) {\n        if (e.type == 'touchstart') {\n            if (!e.target.classList.contains('float-screen')) return;\n            let touch = e.targetTouches[0];\n            this.cameraDrag.start = true;\n            this.cameraDrag.xDiffer = touch.clientX - e.target.offsetLeft;\n            this.cameraDrag.yDiffer = touch.clientY - e.target.offsetTop;\n        } else if (e.type == 'touchend') {\n            this.cameraDrag.start = false;\n            this.cameraDrag.xDiffer = 0;\n            this.cameraDrag.yDiffer = 0;\n        } else if (e.type == 'touchmove' && this.cameraDrag.start) {\n            let touch = e.targetTouches[0];\n            var x = touch.clientX - this.cameraDrag.xDiffer;\n            var y = touch.clientY - this.cameraDrag.yDiffer;\n            e.target.style.right = 0;\n            e.target.style.left = x + 'px';\n            e.target.style.top = y + 'px';\n        }\n    }\n\n    /**\n     * 摄像头开关\n     */\n    protected handleToggleCamera() {\n        if (this.faceme.stream && ('getVideoTracks' in this.faceme.stream)) {\n            this.faceme.stream.getVideoTracks().forEach(v => {\n                this.faceme.camera_off = v.enabled;\n                v.enabled = !v.enabled;\n            });\n        }\n    }\n\n    /**\n     * 麦克风开关\n     */\n    protected handleToggleMuted() {\n        if (!this.faceme.stream || !('getAudioTracks' in this.faceme.stream)) return;\n        var tracks = this.faceme.stream.getAudioTracks();\n        if (tracks.length == 0) {\n            message.info(\"没有发现麦克风\");\n        }\n        tracks.forEach(v => {\n            this.faceme.muted = v.enabled;\n            v.enabled = !v.enabled;\n        })\n    }\n\n    /**\n     * 声音开关\n     */\n    protected handleToggleSound() {\n        var volume = this.facehimRef.value.volume;\n        this.facehimRef.value.volume = volume > 0 ? 0 : 1;\n        this.faceme.sound_off = !this.facehimRef.value.volume;\n    }\n\n    /**\n     * 摄像头切换\n     */\n    protected handleToggleSwitchCamera() {\n        if (!this.faceme.stream || !this.faceme.camera) {\n            return;\n        } else if (\n            (this.faceme.camera.type == 'front' && this.devices.camera.back.length < 1)\n            || (this.faceme.camera.type == 'back' && this.devices.camera.front.length < 1)\n        ) {\n            // 如果找不到带标识的摄像头就弹出抽屉自行选择\n            this.cameraPick.value = true;\n            return;\n        }\n        this.switchCamera(this.faceme.camera.type == 'front' ? 'back' : 'front');\n    }\n\n    /**\n     * 创建对等连接\n     */\n    protected createPeerConnection() {\n        this.peerConnection = reactive(new RTCPeerConnection({iceServers: Config.iceServers}));\n        // 本地setRemoteDescription会触发这个事件\n        this.peerConnection.onicecandidate = this.handleIceCandidateEvent.bind(this);\n        // 本地addTrack会触发这个事件\n        this.peerConnection.onnegotiationneeded = this.handleNegotiationneededEvent.bind(this);\n        // 远程连接进来会触发这个事件\n        this.peerConnection.ontrack = this.handleTrackEvent.bind(this);\n    }\n\n    /**\n     *\n     * @param event\n     */\n    protected handleIceCandidateEvent(event: any) {\n        console.log('onicecandidate')\n        if (event.candidate) {\n            this.publish({\n                event: 'client-candidate',\n                friend_id: unref(this.friend).friend_id,\n                data: event.candidate,\n            });\n        }\n    }\n\n    protected handleNegotiationneededEvent() {\n        console.log('onnegotiationneeded')\n        if (this.peerConnection.signalingState != \"stable\") {\n            return;\n        } else if (!this.peerConnection.localDescription) {\n            this.createOffer().then(() => {\n                this.publish({\n                    event: 'client-offer',\n                    friend_id: unref(this.friend).friend_id,\n                    data: this.peerConnection.localDescription,\n                });\n            });\n        }\n    }\n\n    /**\n     * 远端媒体轨道创建成功，向本地添加媒体流显示\n     * @param e\n     */\n    protected handleTrackEvent(e: any) {\n        console.log('ontrack', e.streams[0])\n        this.facehimRef.value.srcObject = e.streams[0];\n        this.facehimRef.value.onloadedmetadata = () => {\n            console.log('远端视频加载成功');\n            this.facehim.booted = true;\n            this.faceme.fullscreen = false;\n            message.success('连线成功');\n        }\n    }\n\n    /**\n     * 自由切换摄像头\n     * @param index\n     * @param camera\n     */\n    protected handlePickCamera(index: number, camera: CameraInfo) {\n        this.faceme.video = {deviceId: camera.deviceId};\n        this.switchCamera(this.faceme.camera.type);\n    }\n\n    /**\n     * 创建本地会话描述\n     */\n    public createOffer() {\n        if (!this.peerConnection)\n            this.createPeerConnection();\n        return this.peerConnection.createOffer({\n            offerToReceiveAudio: true,\n            offerToReceiveVideo: true,\n        }).then(description => this.peerConnection.setLocalDescription(description));\n    }\n\n    /**\n     * 添加媒体轨道\n     */\n    protected addTracks() {\n        // 添加本地track 发送localDescription时会被带过去\n        this.faceme.stream?.getTracks().forEach(track => {\n            this.peerConnection.addTrack(track, <MediaStream>this.faceme.stream);\n        });\n    }\n\n    /**\n     * 切换媒体轨道\n     * @param stream\n     */\n    protected replaceTrack(stream: MediaStream) {\n        if (this.peerConnection && 'getTracks' in stream) {\n            stream.getTracks().forEach(track => {\n                let sender: RTCRtpSender | undefined = this.peerConnection.getSenders().find((s) => s.track?.kind == track.kind);\n                if (track.kind == 'video') track.enabled = !this.faceme.camera_off;\n                if (track.kind == 'audio') track.enabled = !this.faceme.muted;\n                console.log('found sender:', sender);\n                if (sender) sender.replaceTrack(track);\n            });\n        }\n    }\n\n    /**\n     * 启动媒体设备\n     * @param option\n     */\n    protected bootMedia(option: MediaStreamConstraints) {\n        return navigator.mediaDevices.getUserMedia(option);\n    }\n\n    /**\n     * 启动摄像头\n     * @param type\n     */\n    protected bootCamera(type: 'front' | 'back') {\n        let video_constraints = this.faceme.video;\n        if (this.faceme.video && typeof this.faceme.video == 'boolean') {\n            video_constraints = {facingMode: this.facingMode[type]};\n            let device = this.getCameraDevice(type);\n            if (device?.deviceId) {\n                video_constraints = {deviceId: device.deviceId};\n            }\n        }\n        let option = {\n            video: video_constraints,\n            audio: this.faceme.audio,\n        };\n        return this.bootMedia(option).then(stream => {\n            let videoTracks = stream.getVideoTracks();\n            console.log('Using video device: ' + videoTracks[0].label);\n            this.faceme.booted = true;\n            this.faceme.stream = stream;\n            this.facemeRef.value.srcObject = stream;\n            if (this.devices.all.length < 1) this.initDevices();\n            return Promise.resolve(stream);\n        }, e => {\n            console.log(e);\n            return Promise.reject(e);\n        });\n    }\n\n    /**\n     * 切换摄像头\n     * @param type\n     */\n    protected switchCamera(type: 'front' | 'back') {\n        if (this.faceme.stream && 'getTracks' in this.faceme.stream) {\n            this.faceme.stream.getTracks().forEach(async strack => {\n                strack.stop();\n            });\n            this.bootCamera(type).then((stream) => {\n                this.replaceTrack(stream);\n                this.publish({\n                    event: 'client-switch-camera',\n                    friend_id: this.friend.value.friend_id,\n                    data: {\n                        camera_type: this.faceme.camera.type,\n                    },\n                });\n            });\n        } else {\n            this.bootCamera(type);\n        }\n    }\n\n    /**\n     * 获取摄像头信息\n     * @param type\n     */\n    protected getCameraDevice(type: 'front' | 'back') {\n        if (type == 'back' && this.devices.camera.back.length > 0) {\n            this.faceme.camera = this.devices.camera.back[0];\n        } else if (type == 'front' && this.devices.camera.front.length > 0) {\n            this.faceme.camera = this.devices.camera.front[0];\n        } else if (Object.keys(this.faceme.camera).length <= 0) {\n            this.faceme.camera = this.devices.camera.all[0] || {};\n        }\n        return this.faceme.camera;\n    }\n\n    /**\n     * 挂断\n     * @param navigate\n     */\n    protected handUp(navigate = false) {\n        if (this.peerConnection) {\n            console.log('hand-up');\n            this.publish({\n                event: 'call-invite-feedback',\n                friend_id: this.friend.value.friend_id,\n                data: {\n                    result: 'hand-up',\n                },\n            });\n        }\n        this.destroyStream();\n        this.closeRtc();\n        if (navigate) this.router.go(-1);\n    }\n\n    /**\n     * 关闭/销毁媒体流\n     */\n    destroyStream() {\n        var stream = this.faceme.stream;\n        if (stream && typeof stream.getTracks == 'function') {\n            stream.getVideoTracks().forEach(v => {\n                v.stop();\n                console.log('关闭', v.label);\n                this.faceme.booted = false;\n            });\n            stream.getAudioTracks().forEach(v => {\n                v.stop();\n                console.log('关闭', v.label);\n                this.faceme.audio = false;\n            });\n            this.faceme.stream = undefined;\n        }\n    }\n\n    /**\n     * 关闭对等连接\n     */\n    protected closeRtc() {\n        if (!this.peerConnection) return 0;\n        this.peerConnection.onicecandidate = null;\n        this.peerConnection.onnegotiationneeded = null;\n        this.peerConnection.ontrack = null;\n        this.peerConnection.close();\n        this.peerConnection = <any>null;\n    }\n\n    /**\n     * 发布\n     * @param data\n     */\n    protected publish(data: { friend_id: number, event: string, data?: object | null }) {\n        this.socketio.emit('video-event-publish', data);\n    }\n}\n","\n    import useController from \"@/lib/useController\";\n    import VideoChatController from \"@/controller/VideoChatController\";\n\n    export default useController(new VideoChatController());\n","import { render } from \"./VideoChat.vue?vue&type=template&id=5ab169b9&scoped=true&ts=true\"\nimport script from \"./VideoChat.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoChat.vue?vue&type=script&lang=ts\"\n\nimport \"./VideoChat.vue?vue&type=style&index=0&id=5ab169b9&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/biglight/wwwroot/drchat-v2/front-end/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5ab169b9\"]])\n\nexport default __exports__"],"names":["SDPUtils","Math","random","toString","substr","localCName","generateIdentifier","splitLines","blob","trim","split","map","line","splitSections","parts","part","index","getDescription","sections","getMediaSections","shift","matchPrefix","prefix","filter","indexOf","parseCandidate","substring","candidate","foundation","component","protocol","toLowerCase","priority","parseInt","ip","address","port","type","i","length","relatedAddress","relatedPort","tcpType","ufrag","usernameFragment","undefined","writeCandidate","sdp","push","toUpperCase","join","parseIceOptions","parseRtpMap","parsed","payloadType","name","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","id","direction","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","Object","keys","params","forEach","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","value","parseSsrcGroup","semantics","ssrcs","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","slice","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","password","writeIceParameters","iceLite","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","JSON","parse","stringify","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","obj","cname","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","stream","track","planB","msidParts","parseSctpDescription","parseMLine","maxSizeLine","maxMessageSize","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","sctp","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","sessionId","version","user","getDirection","getKind","isRejected","parseOLine","username","sessionVersion","netType","addressType","isValidSDP","charAt","module","exports","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createElementVNode","_hoisted_7","key","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","render","_ctx","_cache","$props","$setup","$data","$options","_component_Cameras","_resolveComponent","_openBlock","_createElementBlock","src","friend","avatar","$route","query","accept","_Fragment","isPeerConnection","facehim","booted","inviteAsk","result","_toDisplayString","resultMap","_normalizeClass","facemeClasses","ref","onMousedown","args","handleMouse","onTouchmove","handleTouch","onTouchstart","onTouchend","onDblclick","_withModifiers","$event","handleFullscreen","muted","autoplay","facehimClasses","item","active","faceme","camera_off","onClick","handleToggleCamera","handleToggleSwitchCamera","$router","go","handleToggleMuted","sound_off","handleToggleSound","_createVNode","modelValue","cameraPick","cameras","devices","camera","all","onPickCamera","handlePickCamera","_defineComponent","__name","props","Boolean","Array","emits","setup","__props","emit","__exports__","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","pos","match","wrapPeerConnectionEvent","window","eventNameToWrap","wrapper","RTCPeerConnection","proto","prototype","nativeAddEventListener","addEventListener","nativeEventName","cb","apply","this","arguments","wrappedCallback","e","modifiedEvent","handleEvent","_eventMap","Map","set","nativeRemoveEventListener","removeEventListener","has","unwrappedCb","get","delete","size","defineProperty","enumerable","configurable","disableLog","bool","Error","disableWarnings","log","console","deprecated","oldMethod","newMethod","warn","detectBrowser","browser","navigator","mozGetUserMedia","userAgent","webkitGetUserMedia","isSecureContext","webkitRTCPeerConnection","supportsUnifiedPlan","RTCRtpTransceiver","isObject","val","call","compactObject","data","reduce","accumulator","isObj","isEmptyObject","assign","walkStats","stats","base","resultSet","endsWith","filterStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","logging","utils","shimGetUserMedia","browserDetails","mediaDevices","constraintsToChrome_","c","mandatory","optional","cc","r","ideal","exact","min","max","oldname_","oc","mix","advanced","concat","shimConstraints_","constraints","func","audio","remap","a","b","video","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","then","d","dev","find","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia_","onSuccess","onError","getUserMedia","bind","origGetUserMedia","cs","getAudioTracks","getVideoTracks","getTracks","stop","DOMException","Promise","reject","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","error","shimMediaStream","MediaStream","webkitMediaStream","shimOnTrack","_ontrack","f","origSetRemoteDescription","setRemoteDescription","_ontrackpoly","te","receiver","getReceivers","event","Event","transceiver","streams","dispatchEvent","shimGetSendersWithDtmf","shimSenderWithDtmf","pc","dtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","splice","origAddStream","addStream","origRemoveStream","removeStream","s","RTCRtpSender","origGetSenders","senders","shimGetStats","origGetStats","getStats","selector","onSucc","onErr","fixChromeStats_","response","standardReport","reports","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","successCallbackWrapper_","resolve","shimSenderReceiverGetStats","RTCRtpReceiver","origGetReceivers","receivers","srcElement","MediaStreamTrack","err","shimAddTrackRemoveTrackWithNative","getLocalStreams","_shimmedLocalStreams","streamId","alreadyExists","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","replaceExternalStreamId","signalingState","t","oldStream","method","nativeMethod","methodObj","isLegacyCall","desc","origSetLocalDescription","setLocalDescription","origLocalDescription","getOwnPropertyDescriptor","isLocal","streamid","hasTrack","shimPeerConnection","RTCIceCandidate","fixNegotiationNeeded","target","getConfiguration","sdpSemantics","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","code","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","sendEncodings","shouldPerformCheck","encodingParam","ridRegex","test","rid","TypeError","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","encodings","setParameters","catch","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","createOffer","finally","shimCreateAnswer","origCreateAnswer","createAnswer","shimLocalStreamsAPI","_localStreams","_addTrack","tracks","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","addIceCandidate","successCallback","failureCallback","options","promise","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","server","hasOwnProperty","urls","url","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","setDirection","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","toJSON","sdpMid","sdpMLineIndex","writable","shimRTCIceCandidateRelayProtocol","relayProtocol","shimMaxMessageSize","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","send","byteLength","readyState","origCreateDataChannel","createDataChannel","dataChannel","channel","shimConnectionState","completed","checking","iceConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","removeExtmapAllowMixed","nativeSRD","shimAddIceCandidateNullOrEmpty","nativeAddIceCandidate","shimParameterlessSetLocalDescription","nativeSetLocalDescription","adapterFactory","shimChrome","shimFirefox","shimSafari","adapter","commonShim","chromeShim","browserShim","firefoxShim","safariShim","VideoChatController","Cameras","front","back","context","socketio","useSocketio","route","useRoute","router","useRouter","store","useStore","reactive","camera_type","fullscreen","cameraDrag","start","xDiffer","yDiffer","onMounted","async","initSocketEvents","initDevices","bootCamera","publish","friend_id","state","User","info","peerConnection","onBeforeRouteLeave","to","from","next","handUp","off","facemeRef","facehimRef","computed","beforeRouteEnter","Friend","res","on","createPeerConnection","addTracks","localDescription","Modal","title","okText","onOk","device","search","group","back_id","front_id","groupId","values","style","classList","contains","clientX","offsetLeft","clientY","offsetTop","element","document","onmouseup","onmousemove","preventDefault","x","y","right","left","top","touch","targetTouches","v","enabled","volume","switchCamera","Config","onicecandidate","handleIceCandidateEvent","onnegotiationneeded","handleNegotiationneededEvent","ontrack","handleTrackEvent","unref","srcObject","onloadedmetadata","replaceTrack","bootMedia","option","video_constraints","getCameraDevice","videoTracks","strack","navigate","destroyStream","closeRtc","close","useController"],"sourceRoot":""}