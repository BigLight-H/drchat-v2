"use strict";(self["webpackChunkdrchat"]=self["webpackChunkdrchat"]||[]).push([[199],{8845:function(t,e,i){i.d(e,{Z:function(){return b}});var s=i(3396),n=i(7139),a=i(4870),o=i(3641);const c=t=>((0,s.dD)("data-v-30c47fc5"),t=t(),(0,s.Cn)(),t),r={class:"data-part-one"},l={class:"item-avatar"},d=["src"],u={key:0,class:"unread-num"},v={class:"item-title"},h=c((()=>(0,s._)("span",{class:"dot"},null,-1))),p=["innerHTML"],m={key:0,class:"data-part-three"},_={class:"item-time"},f=c((()=>(0,s._)("div",{class:"item-trumpet"},null,-1)));var k=(0,s.aZ)({__name:"ContactItem",props:{item:Object,forRecent:{type:Boolean,default:!0},actived:Boolean,online:Boolean},emits:["pick"],setup(t,{emit:e}){const i=t;let c=(0,s.Fl)((()=>({"data-item":!0,action:i.actived,online:i.online})));const k=t=>{e("pick",i.item)},g=()=>{};return(e,i)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)((0,a.SU)(c)),onClick:k,onDblclick:g,onselectstart:"return false"},[(0,s._)("div",r,[(0,s._)("div",l,[(0,s._)("img",{src:t.item.avatar},null,8,d)]),t.item.unread?((0,s.wg)(),(0,s.iD)("div",u,(0,n.zw)(t.item.unread),1)):(0,s.kq)("",!0)]),(0,s._)("div",{class:(0,n.C_)(["data-part-two",{contact:!t.forRecent}])},[(0,s._)("div",v,[h,(0,s._)("span",null,(0,n.zw)(t.item.realname),1)]),t.forRecent?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"item-breif",innerHTML:(0,a.SU)(o.du)(t.item.breif)},null,8,p)):(0,s.kq)("",!0)],2),t.forRecent?((0,s.wg)(),(0,s.iD)("div",m,[(0,s.WI)(e.$slots,"part-three",{},(()=>[(0,s._)("div",_,(0,n.zw)(t.item.datetime),1),f]))])):(0,s.kq)("",!0)],34))}}),g=i(89);const C=(0,g.Z)(k,[["__scopeId","data-v-30c47fc5"]]);var b=C},2040:function(t,e,i){i.d(e,{Z:function(){return f}});var s=i(3396),n=i(4870),a=i(9242),o=i(7139);const c=t=>((0,s.dD)("data-v-1a9cd6a9"),t=t(),(0,s.Cn)(),t),r={class:"search-box"},l={class:"input-search"},d=["onKeyup"],u=c((()=>(0,s._)("i",{class:"iconfont icon-sousuo isearch"},null,-1))),v=c((()=>(0,s._)("i",{class:"iconfont icon-jia1"},null,-1))),h=[v];var p=(0,s.aZ)({__name:"Search",props:{value:{type:String,default:""}},emits:["plus","search"],setup(t,{emit:e}){const i=t;let c=(0,n.iH)("");(0,s.bv)((()=>{c.value=i.value}));const v=()=>{e("plus",c)},p=()=>{c.value=""},m=()=>{e("search",c)};return(t,e)=>((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",l,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>(0,n.dq)(c)?c.value=t:c=t),placeholder:"搜索",onKeyup:(0,a.D2)(m,["enter"])},null,40,d),[[a.nr,(0,n.SU)(c)]]),u,(0,s._)("i",{class:(0,o.C_)(["iconfont","icon-chahao","icancel",(0,n.SU)(c).length>0?"":"hide"]),onClick:p},null,2)]),(0,s._)("div",{class:"plus",onClick:v},h)]))}}),m=i(89);const _=(0,m.Z)(p,[["__scopeId","data-v-1a9cd6a9"]]);var f=_},2199:function(t,e,i){i.r(e),i.d(e,{default:function(){return k}});var s=i(3396);const n={class:"sc-box"},a={key:0,style:{margin:"0 0 10px 12px"}};function o(t,e,i,o,c,r){const l=(0,s.up)("Search"),d=(0,s.up)("ContactItem");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",{class:"data-list",onScroll:e[0]||(e[0]=(...e)=>t.handleListScroll&&t.handleListScroll(...e))},[t.is_mobile?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(l)])),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.conversationList,((e,i)=>((0,s.wg)(),(0,s.j4)(d,{key:i,item:e,online:!!e.object_info.is_online,actived:t.$route.query.conversation_id==e.id,selected:t.selected(e),onPick:t.pick},null,8,["item","online","actived","selected","onPick"])))),128))],32)])}var c=i(2482),r=(i(7658),i(2040)),l=i(8845),d=i(3641),u=i(2483),v=i(65);class h{constructor(){(0,c.Z)(this,"components",{Search:r.Z,ContactItem:l.Z}),(0,c.Z)(this,"router",void 0),(0,c.Z)(this,"store",void 0)}setup(){this.router=(0,u.tv)(),this.store=(0,v.oR)();const t=(0,s.Fl)((()=>(0,d.tq)()));return(0,s.bv)((()=>{this.store.dispatch("Conversation/refreshConversationList",!this.store.state.Conversation.conversationList.length)})),(0,s.YP)(t,((t,e)=>this.router.push("/message"))),{pick:this.pick.bind(this),conversationList:(0,s.Fl)((()=>this.store.state.Conversation.conversationList)),is_mobile:t,selected:this.selected.bind(this),handleListScroll:this.handleListScroll.bind(this)}}pick(t){if(!(0,d.tq)())return this.router.push(`/message?conversation_id=${t.id}`);this.router.push(`/mobile-message?conversation_id=${t.id}`)}handleListScroll(t){t.target.scrollHeight-t.target.offsetHeight==t.target.scrollTop&&this.store.dispatch("Conversation/paginateConversationList",this.store.state.Conversation.page+1)}selected(t){}}var p=i(5818),m=(0,p.Z)(new h),_=i(89);const f=(0,_.Z)(m,[["render",o],["__scopeId","data-v-914313d2"]]);var k=f}}]);
//# sourceMappingURL=199.dc3dedbc.js.map